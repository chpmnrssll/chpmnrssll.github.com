<!DOCTYPE html>
<html>
	<head>
		<title>Russell Chapman</title>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="chpmnrssll.github.com : Russell Chapman" />
		
		<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
		<link rel="stylesheet" href="css/style.css">
	</head>
	<body>
		<canvas id="canvasBackground" width="320" height="240"></canvas>
		<div id="header"></div>
		<div id="content">
			<div class="row">
				<div class="col-md-4">
				</div>
				<div class="col-md-4">
					<strong><em class="text-center text-muted">Loading</em></strong>
				</div>
				<div class="col-md-4">
				</div>
			</div>
		</div>
		<div id="footer"></div>
		<!--
		<script type="text/template" id="user-edit">
			<form class="">
				<legend>Add new</legend>
				<div class="control-group">
					<label class="control-label">Name</label>
					<div class="controls"><input id="name" type="text" required=""></div>
				</div>
				<div class="control-group">
					<label class="control-label">Email</label>
					<div class="controls"><input id="email" type="text" required=""></div>
				</div>
				<div class="control-group">
					<label class="control-label">Password</label>
					<div class="controls"><input id="password" type="password" required=""></div>
				</div>
				<div class="control-group">
					<label class="control-label"></label>
					<div class="controls"><button id="" name="" class="btn btn-primary">Create</button></div>
				</div>
			</form>
		</script>
		
		<script type="text/template" id="user-list">
			<table class="table table-hover table-striped">
				<thead>
					<tr>
						<th>Name</th>
						<th>Email</th>
						<th></th>
					</tr>
				</thead>
				<tbody id="user-items"></tbody>
			</table>
		</script>
		
		<script type="text/template" id="user-item">
			<td><a href="#users/edit/<%= _id %>"><%= name %></a></td>
			<td><a href="#users/edit/<%= _id %>"><%= email %></a></td>
			<td><a href="#users/delete/<%= _id %>"><i class="glyphicon glyphicon-remove delete-user"></i></a></td>
		</script>
		-->
		
		<script>
			var require = {
				baseUrl: "js/",
				//urlArgs: "bust=" +  (new Date()).getTime(),
				deps: ["main"]
			};
		</script>
		<script src="js/libs/require/require.js"></script>
		<!-- <script type="text/javascript" src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script> -->
		<script>
			(function () {
    const FPS = 30;
    
	//Get context, precalc some variables, and create screen buffer
	var canvas = document.getElementById('canvas');
	var context2D = canvas.getContext('2d');
	var width = canvas.width;
	var height = canvas.height;
	var bufferSize = width*height;
	var buffer = context2D.createImageData(width, height);
    var yIndex = {}, palette = {}, sinc = {}, tmp = 0;
	
	//Precalc y*width values for each horizontal line
	for(var y = 0; y < height; y++)
		yIndex[y] = y*width;
	
	//Precalc 256 color palette r,g,b values
	for(var i = 0; i < 256; i++) {
		palette[i] = {}
        var shade = 255-((i/2)*(Math.sin(i/40)));
		palette[i].r = shade;
		palette[i].g = shade;
        palette[i].b = shade;
	}
	
	//Precalc Math.sin table
	for(var i = 0; i < 1800; i++) {
		sinc[i] = (Math.sin((3.1416*i)/180)*1024);
	}
	
	setInterval(function () {
	    var index, color, xc, yc;
	    tmp = (tmp + 1) % 720;
	    
	    //Main loop with optimized magic plasma color formula
	    for(y = 0; y < height; y++) {
            yc = ((sinc[(y << 1)+(tmp >> 1)] + sinc[y+(tmp << 1)] + (sinc[(y >> 1)+tmp] << 1)) >> 6);
            for(x = 0; x < width; x++) {
                xc = yc + (((sinc[x+(tmp << 1)] << 1) + sinc[(x << 1)+(tmp >> 1)] + (sinc[x+tmp] << 1)) >> 6);
			    
			    index = (yIndex[y] + x) << 2;			//current pixel
			    color = Math.abs(((yc*xc) >> 5) % 255);	//current color
			    buffer.data[index++] = palette[color].r;
			    buffer.data[index++] = palette[color].g;
			    buffer.data[index++] = palette[color].b;
			    buffer.data[index++] = 255;
		    }
	    }
	    
	    //Flip buffer to canvas
	    context2D.putImageData(buffer, 0,0);
    }, 1000/FPS);
})();
		</script>
	</body>
</html>
